{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict'\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.picture-search-form');\nconst searchInput = document.querySelector('.picture-search-name');\nconst loaderContainer = document.querySelector('.loader-container');\n\nconst API_KEY = '41764451-f0ee5e8d00846e21c9f97a054';\n\nfunction showLoader() {\n  loaderContainer.style.display = 'block';\n}\nfunction hideLoader() {\n  loaderContainer.style.display = 'none';\n}\n\nlet requestParams = {\n  key: API_KEY,\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nfunction searchImages(query) {\n  requestParams.q = query;\n  const searchParams = new URLSearchParams(requestParams);\n\n  showLoader();\n\n  fetch(`https://pixabay.com/api/?${searchParams}`)\n    .then(response => {\n      hideLoader();\n\n      if (!response.ok) {\n        throw new Error(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      }\n      return response.json();\n    })\n\n    .then(({ hits }) => {\n      const gallery = document.querySelector('.gallery');\n\n      if (hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      const lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt',\n        close: true,\n      });\n\n      gallery.innerHTML = '';\n\n      const galleryHtml = hits.reduce(\n        (html, image) =>\n          html +\n          `<a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\"\n                alt=\"${image.tags}\"\n            />\n           <ul class=\"info-list\">\n              <li class=\"info-item\">\n                  <p class=\"info-title\">Likes</p>\n                  <p class=\"info-value\">${image.likes}</p>\n              </li>\n              <li class=\"info-item\">\n                  <p class=\"info-title\">Views</p>\n                  <p class=\"info-value\">${image.views}</p>\n              </li>\n              <li class=\"info-item\">\n                  <p class=\"info-title\">Comments</p>\n                  <p class=\"info-value\">${image.comments}</p>\n              </li>\n              <li class=\"info-item\">\n                  <p class=\"info-title\">Downloads</p>\n                  <p class=\"info-value\">${image.downloads}</p>\n              </li>\n            </ul>\n        </a>`,\n        ''\n      );\n      gallery.insertAdjacentHTML('beforeend', galleryHtml);\n      lightbox.refresh();\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message: error.message,\n        position: 'topRight',\n      });\n    });\n}\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const searchQuery = searchInput.value.trim();\n  searchImages(searchQuery);\n  searchForm.reset();\n});"],"names":["searchForm","searchInput","loaderContainer","API_KEY","showLoader","hideLoader","requestParams","searchImages","query","searchParams","response","hits","gallery","iziToast","lightbox","SimpleLightbox","galleryHtml","html","image","error","event","searchQuery"],"mappings":"6vBAQA,MAAMA,EAAa,SAAS,cAAc,sBAAsB,EAC1DC,EAAc,SAAS,cAAc,sBAAsB,EAC3DC,EAAkB,SAAS,cAAc,mBAAmB,EAE5DC,EAAU,qCAEhB,SAASC,GAAa,CACpBF,EAAgB,MAAM,QAAU,OAClC,CACA,SAASG,GAAa,CACpBH,EAAgB,MAAM,QAAU,MAClC,CAEA,IAAII,EAAgB,CAClB,IAAKH,EACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEA,SAASI,EAAaC,EAAO,CAC3BF,EAAc,EAAIE,EAClB,MAAMC,EAAe,IAAI,gBAAgBH,CAAa,EAEtDF,IAEA,MAAM,4BAA4BK,GAAc,EAC7C,KAAKC,GAAY,CAGhB,GAFAL,IAEI,CAACK,EAAS,GACZ,MAAM,IAAI,MACR,0EACV,EAEM,OAAOA,EAAS,MACtB,CAAK,EAEA,KAAK,CAAC,CAAE,KAAAC,KAAW,CAClB,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjD,GAAID,EAAK,SAAW,EAAG,CACrBE,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UACpB,CAAS,EACD,MACD,CAED,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,MACd,MAAO,EACf,CAAO,EAEDH,EAAQ,UAAY,GAEpB,MAAMI,EAAcL,EAAK,OACvB,CAACM,EAAMC,IACLD,EACA,iCAAiCC,EAAM;AAAA;AAAA;AAAA,uBAG1BA,EAAM;AAAA,uBACNA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,0CAKaA,EAAM;AAAA;AAAA;AAAA;AAAA,0CAINA,EAAM;AAAA;AAAA;AAAA;AAAA,0CAINA,EAAM;AAAA;AAAA;AAAA;AAAA,0CAINA,EAAM;AAAA;AAAA;AAAA,cAIxC,EACR,EACMN,EAAQ,mBAAmB,YAAaI,CAAW,EACnDF,EAAS,QAAO,CACtB,CAAK,EACA,MAAMK,GAAS,CACdN,EAAS,MAAM,CACb,MAAO,QACP,QAASM,EAAM,QACf,SAAU,UAClB,CAAO,CACP,CAAK,CACL,CAEAnB,EAAW,iBAAiB,SAAUoB,GAAS,CAC7CA,EAAM,eAAc,EAEpB,MAAMC,EAAcpB,EAAY,MAAM,KAAI,EAC1CM,EAAac,CAAW,EACxBrB,EAAW,MAAK,CAClB,CAAC"}